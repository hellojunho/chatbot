# 8장. 챗봇 엔진 만들기

## 8.1 챗봇 엔진이란
`챗봇`이란 *채팅 하는 봇*이라는 뜻이다.  
그러면 `챗봇 엔진`이란 뭘까?  
`챗봇 엔진`은 챗봇에서 핵심 기능을 하는 `모듈`이며, 화자의 질문을 이해하고 알맞은 
답변을 출력하는 역할을 한다.  

한 마디로 `자연어 처리 모듈`이라고 한다.  

## 8.2 챗봇 엔진 구조
챗봇을 설계하기 전에 내가 만들고자 하는 챗봇의 목적과 어떤 도메인 지식을 가지는 
챗봇을 만들 것인지 결정해야 한다.  
그에 따라 챗봇 엔진 개발 방법론과 학습에 필요한 데이터셋이 달라지기 때문에 매우 중요한 과정이다!!  

이 책에서 만드는 챗봇은 토이 수준의 챗봇이며, 이 챗봇 엔진은 토이 수준이기 때문에 
크게 5가지의 기능을 한다.  

[기능]  

| 핵심 기능     | 설명                                                                  |
|-----------|---------------------------------------------------------------------|
| 질문 의도 분류  | 화자의 질문 의도를 파악함. 의도 분류 모델을 이용해 의도 클래스를 예측하는 문제.                      |
| 개체명 인식    | 화자의 질문에서 단어 토큰별 개체명을 인식함. 단어 토큰에 맞는 개체명을 예측하는 문제.                   |
| 핵심 키워드 추출 | 화자의 질문 의미에서 핵심이 될 만한 단어 토큰을 추출. 형태소 분석기를 이용해 핵심 키워드가 되는 명사나 동사를 추출. |
| 답변 검색     | 해당 질문의 의도, 개체명, 핵심 키워드 등을 기반으로 답변을 학습 DB에서 검색.                      |
| 소켓 서버     | 다양한 종류의 챗봇 클라이언트에서 요청하는 질문을 처리하기 위해 소켓 서버 프로그램 역할. (챗봇 엔진 서버 프로그램)  |

[챗봇 엔진 처리 과정]  
```commandline
[질문]  
"내일 오전 10시에 탕수육 주문하고 싶어" -> 챗봇 엔진  

[챗봇 엔진]  
1. 전처리 과정 - 불용어 제거, 토큰 분리(키워드 추출) ->  
2. 의도 분석 - 의도: 음식 주문 -> 
3. 개체명 인식 - 내일: Data, 오전 10시: Time, 탕수육: Food -> 
4. 답변 검색 - (의도, 개체명, 키워드) -> 
5. 학습 DB - DB에서 적절한 답변 탐색 -> 
6. 답변 출력 -> 출력

[답변]  
"주문해주셔서 감사합니다."
```  
화자의 질의 문장이 입력되면 챗봇 엔진은 제일 먼저 `전처리`를 진행한다.  
형태소 분석기를 이용해 단어 토큰(키워드)을 추출한 뒤 명사나 동사 등 필요한 품사만 남기고 불용어는 제거한다.  
여기서, `불용어(Stopword)`란 언어 분[석시 의미가 있는 단어와 의미가 없는 단어나 조사 등이 있는데, 그 중에서 의미가 없는 것을 `불용어`라고 한다.  
그 다음 의도 분석과 개체명 인식을 완료한 후 결과값을 이용해 적절한 답변을 학습 DB에서 검색해 화자에게 답변을 출력함.  
  
해당 챗봇 엔진에는 자연어 처리를 위해 2가지 딥러닝 모델(의도 분석, 개체명 인식)을 사용한다.  
해당 `도메인 지식`에 맞는 딥러닝 모델 학습 데이터셋을 많이 보유하고 있다면 `성능`이 우수한 챗봇 엔진 개발에 도움이 된다!  
`성능`은 클라이언트의 질문에 대한 답변의 속도, 질문에 얼마나 적절한 답변을 출력하는가 등... 이 있는 것 같습니다.  
  
## 8.3 전처리 과정
챗봇에서 자연어를 처리할 때 가장 먼저 수행해야 하는 기본 과정인 `전처리 과정`은 어떻게 될까?  
전처리를 어떻게 하느냐에 따라 후처리 부분의 성능 차이가 커지므로 매우 중요하다고 한다!  

이 책에서 만드는 챗봇 엔진 전처리 과정은 `1) 형태소 분석기로 토크나이징`하고, `2) 문장 해석에 의미 있는 정보만 남기고`, `3) 나머지 불용어들은 제거`하는 
작업을 한다.  

전처리 과정을 담당하는 모듈은 유틸리티 라이브러리이기 때문에 */utils* 내에 생성한다.  
